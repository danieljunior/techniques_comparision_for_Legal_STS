# text = 'O cuidado em identificar pontos críticos no desafiador cenário globalizado talvez venha a ressaltar a relatividade das formas de ação. A nível organizacional, a execução dos pontos do programa deve passar por modificações independentemente das diretrizes de desenvolvimento para o futuro. É importante questionar o quanto a determinação clara de objetivos desafia a capacidade de equalização do sistema de participação geral.\
#         No entanto, não podemos esquecer que a estrutura atual da organização ainda não demonstrou convincentemente que vai participar na mudança dos paradigmas corporativos. Do mesmo modo, a competitividade nas transações comerciais garante a contribuição de um grupo importante na determinação do processo de comunicação como um todo. A prática cotidiana prova que a hegemonia do ambiente político nos obriga à análise do retorno esperado a longo prazo.\
#         Percebemos, cada vez mais, que a constante divulgação das informações facilita a criação do sistema de formação de quadros que corresponde às necessidades. A certificação de metodologias que nos auxiliam a lidar com a contínua expansão de nossa atividade obstaculiza a apreciação da importância dos procedimentos normalmente adotados. As experiências acumuladas demonstram que a consulta aos diversos militantes assume importantes posições no estabelecimento dos índices pretendidos. É claro que o início da atividade geral de formação de atitudes é uma das consequências das condições financeiras e administrativas exigidas.'
# print(get_split(text))        

# import gensim
# model = gensim.models.doc2vec.Doc2Vec.load('models/itd_doc2vec_model')
# v = model.infer_vector(text.split())
# print(v)


# import joblib

# from tfidf_embedder import TfIdfEmbedder

# tfidf_model = joblib.load('results/tcu/tfidf.joblib')
# print(len(tfidf_model.get_feature_names()))

from sentence_transformers import SentenceTransformer, util

model = SentenceTransformer('models/portuguese_sentence_transformer')
sentences = ['A menina jovem está soprando uma bolha que é grande',
            'Não tem nenhuma menina de rosa girando uma fita',
            'Um cachorro de pelagem colorida está correndo através do quintal',
            'A flauta está sendo tocada por um homem',
            'Uma porta está sendo aberta por um homem',
            'Um homem calvo em uma banda está tocando violão na luz',
            'Os meninos jovens estão brincando ao ar livre e o homem está sorrindo por perto',
            'Não tem nenhum menino brincando ao ar livre e não tem nenhum homem sorrindo',
            'TRIBUNAL DE CONTAS DO ESTADO DO RIO DE JANEIRO GABINETE DO CONSELHEIRO RODRIGO MELO DO NASCIMENTO                VOTO GC-7  PROCESSO: TCE-RJ n° 104.134-5/17 ORIGEM: FUNDO ÚNICO DE PREVIDÊNCIA SOCIAL DO ESTADO DO RIO DE JANEIRO - RIOPREVIDÊNCIA ASSUNTO: EDITAL DE CONCORRÊNCIA PÚBLICA CONCORRÊNCIA PÚBLICA. ALIENAÇÃO DE IMÓVEL. CIÊNCIA. NOVA COMUNICAÇÃO. RECOMENDAÇÃO.                                                                                Cuidam os autos do Edital de Concorrência Pública nº 10/2017 (processo administrativo nº E-04/161/1226/2017), encaminhado pelo Fundo Único de Previdência Social do Estado do Rio de Janeiro (Rioprevidência), cujo objeto é a alienação de imóvel situado na Rua Othon Bezerra de Mello, nº 187, Jardim Botânico, Rio de Janeiro - RJ, que se encontra ocupado, com novo valor de lance mínimo revisado para R$ 3.795.000,00 (três milhões, setecentos e noventa e cinco mil reais), com realização adiada sine die.        Trata-se da 4ª (quarta) submissão do Edital em exame à apreciação desta Corte de Contas. Na Sessão Plenária de 06/03/2018, este Tribunal decidiu nos seguintes termos:  VOTO: I- Pela COMUNICAÇÃO ao atual Diretor Presidente do Rioprevidência, com fundamento no art. 6º, § 1º, da Deliberação TCE-RJ nº 204/96, para que, no prazo de 30 (trinta) dias, adote as seguintes providências: 1. Mantenha adiada a presente licitação pelo prazo necessário ao cumprimento da diligência, aguardando a decisão definitiva a ser adotada por esta Corte quanto ao conhecimento do Edital, encaminhando os comprovantes de publicação dos avisos de adiamento nos termos do art. 21, da Lei Federal nº 8.666/93, divulgando e mantendo atualizados os dados referentes à licitação em sua página oficial, em cumprimento ao art. 8º, da Lei Federal nº 12.527/11, 2. Retifique o Custo Unitário Básico (CUB) utilizado para avaliação do valor da benfeitoria, uma vez que o parâmetro utilizado no laudo de avaliação, além de demasiadamente desatualizado (2016), se refere a ""projetos-padrão comercial salas e lojas (CSL)"", enquanto a benfeitoria que se deseja avaliar possui padrão residencial, 3. Amplie a pesquisa de mercado, demonstrando o procedimento técnico utilizado para o descarte de elementos visando à construção da amostra efetivamente utilizada, abstendo-se de eliminar dados sem respaldo técnico, 4. Detalhe, especificando item por item, por meio de errata, todas as alterações efetuadas no ato convocatório, dando a devida publicidade, na forma do art. 21, § 4º, da Lei Federal nº 8.666/93, encaminhando as cópias a este Tribunal, II- Por RECOMENDAÇÃO ao atual Diretor Presidente do Rioprevidência, para que, a divulgação desta e das demais alienações não se restrinja às publicações no Diário Oficial e alcance, também, sites especializados sendo complementada por faixa de propaganda fixada no próprio imóvel, já que o respectivo imóvel se situa em local de grande movimentação, III- Pela CIÊNCIA ao jurisdicionado de que a proposta do Corpo Instrutivo e o parecer do douto Ministério Público Especial podem ser consultados eletronicamente no Portal do TCE-RJ.                       Em sua análise técnica, a Coordenadoria de Exame de Editais assim se pronuncia, por meio da instrução constante da peça eletrônica ""03/05/2018 - Informação da CEE"":                                                                         CONCLUSÃO Considerando que as informações encaminhadas pelo jurisdicionado, que fazem parte do documento digital TCE-RJ nº 7.497-5/2018, de 27/04/18, não elucidam as questões abordadas na decisão desta Corte, em sessão de 06/03/18, Considerando ainda que o mesmo informou que, embora esteja providenciando o atendimento às mesmas, não foi possível fazê-lo tempestivamente, Sugerimos: I- a Ciência ao Plenário acerca das informações trazidas aos autos por intermédio do documento digital TCE-RJ nº 7.497-5/2018, de 27/04/18,  II- a COMUNICAÇÃO ao atual Diretor Presidente do Rioprevidência, com fundamento no art. 6º, § 1º, da Deliberação TCE-RJ nº 204/96, para que, no prazo de 30 (trinta) dias, adote as seguintes providências:  1. Mantenha adiada a presente licitação pelo prazo necessário ao cumprimento da diligência, aguardando a decisão definitiva a ser adotada por esta Corte quanto ao conhecimento do Edital, encaminhando os comprovantes de publicação dos avisos de adiamento nos termos do art. 21, da Lei Federal nº 8.666/93, divulgando e mantendo atualizados os dados referentes à licitação em sua página oficial, em cumprimento ao art. 8º, da Lei Federal nº 12.527/11,  2. Retifique o Custo Unitário Básico (CUB) utilizado para avaliação do valor da benfeitoria, uma vez que o parâmetro utilizado no laudo de avaliação, além de demasiadamente desatualizado (2016), se refere a ""projetos-padrão comercial salas e lojas (CSL)"", enquanto a benfeitoria que se deseja avaliar possui padrão residencial,  3. Amplie a pesquisa de mercado, demonstrando o procedimento técnico utilizado para o descarte de elementos visando à construção da amostra efetivamente utilizada, abstendo-se de eliminar dados sem respaldo técnico,  4. Detalhe, especificando item por item, por meio de errata, todas as alterações efetuadas no ato convocatório, dando a devida publicidade, na forma do art. 21, § 4º, da Lei Federal nº 8.666/93, encaminhando as cópias a este Tribunal,  III- a RECOMENDAÇÃO ao atual Diretor Presidente do Rioprevidência, para que, a divulgação desta e das demais alienações não se restrinja às publicações no Diário Oficial e alcance, também, sites especializados sendo complementada por faixa de propaganda fixada no próprio imóvel, já que o respectivo imóvel se situa em local de grande movimentação,  IV- Pela CIÊNCIA ao jurisdicionado de que a proposta do Corpo Instrutivo e o parecer do douto Ministério Público Especial podem ser consultados eletronicamente no Portal do TCE-RJ.                       O douto Ministério Público de Contas manifesta-se no mesmo sentido, por meio do parecer constante da peça eletrônica ""07/05/2018 - Informação MPE"".        É o Relatório. Passo ao meu Voto.       Após detido exame dos autos, reiterando o disposto em meu Voto anterior, registro que o Corpo Instrutivo, em sua instrução constante da peça eletrônica ""03/05/2018 - Informação da CEE"", cometeu erro material ao informar endereço diverso do imóvel objeto do Edital, no entanto verifico que a análise realizada refere-se ao imóvel localizado na Rua Othon Bezerra de Mello nº 187, Jardim Botânico, Rio de Janeiro - RJ, objeto da alienação sub examine.       Destaco, ainda, que o jurisdicionado, em que pese não ter atendido às determinações proferidas no Voto de 06/03/2018, encaminhou ofício a este Tribunal (Documento TCE-RJ n° 7497-5/18), datado de 27/04/2018, informando que não deixou deliberadamente de atender a esta Corte de Contas por desídia ou desconsideração ao determinado, e que está envidando esforços no sentido de cumprir o disposto em Decisão Plenária de 06/03/2018.       Dessa forma, manifesto-me favoravelmente às medidas sugeridas pelo Corpo Técnico deste Tribunal, no sentido de nova Comunicação ao jurisdicionado, ofertando-lhe mais uma oportunidade de saneamento do feito, tendo em vista não ter permanecido inerte à Decisão Plenária anterior.       Ex positis, verifico que a matéria foi bem analisada pelas instâncias instrutivas, razão pela qual - adotando, como razões de decidir, aquelas constantes da instrução lançada à peça eletrônica ""03/05/2018 - Informação da CEE"" - posiciono-me DE ACORDO com a proposta do Corpo Instrutivo e com o parecer do douto Ministério Público Especial e VOTO: I  - Pela CIÊNCIA AO PLENÁRIO acerca das informações trazidas aos autos por intermédio do Documento TCE-RJ nº 7.497-5/2018, datado de 27/04/2018, II  - Pela COMUNICAÇÃO ao atual Diretor Presidente do Rioprevidência, com fundamento no art. 6º, § 1º, da Deliberação TCE-RJ nº 204/96, para que, no prazo de 30 (trinta) dias, adote as seguintes providências: 1. Mantenha adiada a presente licitação pelo prazo necessário ao cumprimento da diligência, aguardando a decisão definitiva a ser adotada por esta Corte quanto ao conhecimento do Edital, encaminhando os comprovantes de publicação dos avisos de adiamento nos termos do art. 21 da Lei Federal nº 8.666/93, divulgando e mantendo atualizados os dados referentes à licitação em sua página oficial, em cumprimento ao art. 8º da Lei Federal nº 12.527/11, 2. Retifique o Custo Unitário Básico (CUB) utilizado para avaliação do valor da benfeitoria, uma vez que o parâmetro utilizado no laudo de avaliação, além de demasiadamente desatualizado (2016), se refere a ""projetos-padrão comercial salas e lojas (CSL)"", enquanto a benfeitoria que se deseja avaliar possui padrão residencial, 3. Amplie a pesquisa de mercado, demonstrando o procedimento técnico utilizado para o descarte de elementos visando à construção da amostra efetivamente utilizada, abstendo-se de eliminar dados sem respaldo técnico, 4. Detalhe, especificando item por item, por meio de errata, todas as alterações efetuadas no ato convocatório, dando a devida publicidade, na forma do art. 21, § 4º, da Lei Federal nº 8.666/93, encaminhando as cópias a este Tribunal, III  - Por RECOMENDAÇÃO, ao atual Diretor Presidente do Rioprevidência, para que a divulgação desta e das demais alienações não se restrinja às publicações no Diário Oficial e alcance, também, sites especializados, sendo complementada por faixa de propaganda fixada no próprio imóvel, já que este se situa em local de grande movimentação, IV  - Pela CIÊNCIA ao jurisdicionado de que a proposta do Corpo Instrutivo e o parecer do douto Ministério Público Especial podem ser consultados eletronicamente no Portal do TCE-RJ.         Plenário,        GC-7, em 17/05/2018.                                                                                                                                                        RODRIGO MELO DO NASCIMENTO Relator 		   17  ']
#Compute embeddings
embeddings = model.encode(sentences, convert_to_tensor=True)
#Compute cosine-similarities for each sentence with each other sentence
cosine_scores = util.pytorch_cos_sim(embeddings, embeddings)

#Find the pairs with the highest cosine similarity scores
pairs = []
for i in range(len(cosine_scores)-1):
    for j in range(i+1, len(cosine_scores)):
        pairs.append({'index': [i, j], 'score': cosine_scores[i][j]})

#Sort scores in decreasing order
pairs = sorted(pairs, key=lambda x: x['score'], reverse=True)

for pair in pairs[0:10]:
    i, j = pair['index']
    print("{} \t {} \t Score: {:.4f}".format(sentences[i], sentences[j], pair['score']))